(function(e){function t(t){for(var a,o,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);f&&f(t);while(d.length)d.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,o=1;o<r.length;o++){var l=r[o];0!==i[l]&&(a=!1)}a&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},i={app:0},n=[];function o(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"a303cb89","chunk-2d0c8225":"82fa0aa1"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r=i[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,a){r=i[e]=[t,a]}));t.push(r[2]=a);var n,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=o(e);var c=new Error;n=function(t){l.onerror=l.onload=null,clearTimeout(u);var r=i[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",c.name="ChunkLoadError",c.type=a,c.request=n,r[1](c)}i[e]=void 0}};var u=setTimeout((function(){n({type:"timeout",target:l})}),12e4);l.onerror=l.onload=n,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/attestation-covid-19/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var f=c;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"1f49":function(e,t,r){"use strict";var a=r("4c88"),i=r.n(a);i.a},"4c88":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("header",{staticClass:"bg-primary",attrs:{role:"banner"}},[r("div",{staticClass:"container"},[r("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"primary"}},[r("b-navbar-brand",{staticClass:"covid-title",attrs:{to:"/"}},[e._v(" COVID-19 ")]),r("span",{staticClass:"covid-subtitle"},[e._v(" Générateur d'attestation de déplacement dérogatoire ")]),r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-nav-item",{attrs:{to:"/confidentialite"}},[e._v("Confidentialité")]),r("b-nav-item",{attrs:{to:"/about"}},[e._v("À propos")])],1)],1)],1)],1)]),r("div",{staticClass:"container my-4"},[r("router-view")],1),e._m(0),e._m(1)])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("footer",{staticClass:"p-5 bg-dark text-light",attrs:{role:"contentinfo"}},[r("div",{staticClass:"text-center"},[r("a",{staticClass:"text-light",attrs:{href:"https://www.gouvernement.fr/info-coronavirus",title:"Information du gouvernement sur le Covid-19 - nouvelle page",target:"_blank"}},[e._v("Informations du gouvernement sur le Covid-19")]),r("p",{},[e._v("Plus d’infos au "),r("a",{staticClass:"text-light",attrs:{href:"tel:0800130000"}},[e._v("0 800 130 000")])]),r("p",{staticClass:"footer-line",attrs:{id:"version"}})])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"alert  alert-info  d-none",attrs:{id:"update-alert"}},[e._v(" Une nouvelle version est disponible. Cliquer sur le bouton pour l'obtenir. "),r("p",{staticClass:"text-right"},[r("button",{staticClass:"btn  btn-info",attrs:{id:"reload-btn"}},[e._v("Mettre à jour")])])])}],o=r("2877"),s={},l=Object(o["a"])(s,i,n,!1,null,null,null),c=l.exports,u=r("9483");Object(u["a"])("".concat("/attestation-covid-19/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){location.reload(),console.log("App was updated.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});r("d3b7");var f=r("8c4f"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{attrs:{id:"form-profile","accept-charset":"utf-8"},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.save(t)}}},[e.profiles.length?r("div",[r("h2",{staticClass:"h3 my-3"},[e._v("Charger un profil :")]),r("button",{staticClass:"btn btn-primary mr-2",attrs:{type:"button"},on:{click:function(t){return e.loadProfile(null)}}},[e._v("Nouveau profil")]),e._l(e.profiles,(function(t,a){return r("button",{key:a,staticClass:"btn btn-secondary mr-2",attrs:{type:"button"},on:{click:function(t){return e.loadProfile(a)}}},[e._v(e._s(t.firstname))])})),r("hr")],2):e._e(),r("h2",{staticClass:"h3 my-3"},[e._v("Remplissez votre attestation numérique :")]),r("div",{staticClass:"form-row"},[r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Prénom","label-for":"field-firstname"}},[r("b-form-input",{attrs:{id:"field-firstname",required:"",placeholder:"Jean",autofocus:"","aria-invalid":"true"},model:{value:e.form.firstname,callback:function(t){e.$set(e.form,"firstname",t)},expression:"form.firstname"}}),r("span",{staticClass:"validity",attrs:{"aria-hidden":"true"}}),r("p",{staticClass:"exemple"})],1),r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Nom","label-for":"field-lastname"}},[r("b-form-input",{attrs:{id:"field-lastname",required:"",placeholder:"Dupont",autofocus:"","aria-invalid":"true"},model:{value:e.form.lastname,callback:function(t){e.$set(e.form,"lastname",t)},expression:"form.lastname"}}),r("span",{staticClass:"validity",attrs:{"aria-hidden":"true"}}),r("p",{staticClass:"exemple"})],1)],1),r("div",{staticClass:"form-row"},[r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Date de naissance (au format jj/mm/aaaa)","label-for":"field-birthday"}},[r("b-form-input",{attrs:{id:"field-birthday",pattern:"^([0][1-9]|[1-2][0-9]|30|31)\\/([0][1-9]|10|11|12)\\/(19[0-9][0-9]|20[0-1][0-9]|2020)","aria-invalid":"true",placeholder:"01/01/1970",maxlength:"10",required:""},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}}),r("span",{staticClass:"validity",attrs:{"aria-hidden":"true"}}),r("p",{staticClass:"exemple"})],1),r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Lieu de naissance","label-for":"field-birthplace"}},[r("b-form-input",{attrs:{id:"field-birthplace","aria-invalid":"true",placeholder:"Lyon",required:""},model:{value:e.form.birthplace,callback:function(t){e.$set(e.form,"birthplace",t)},expression:"form.birthplace"}}),r("span",{staticClass:"validity",attrs:{"aria-hidden":"true"}}),r("p",{staticClass:"exemple"})],1)],1),r("b-form-group",{attrs:{label:"Adresse","label-for":"field-address"}},[r("b-form-input",{attrs:{id:"field-address","aria-invalid":"true",placeholder:"999 avenue de france",required:""},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}}),r("span",{staticClass:"validity",attrs:{"aria-hidden":"true"}}),r("p",{staticClass:"exemple"})],1),r("div",{staticClass:"form-row"},[r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Code Postal","label-for":"field-zipcode"}},[r("b-form-input",{attrs:{id:"field-zipcode",inputmode:"numeric",pattern:"[0-9]{5}",min:"00000",max:"99999","aria-invalid":"true",minlength:"4",maxlength:"5",placeholder:"75001",required:""},model:{value:e.form.zipcode,callback:function(t){e.$set(e.form,"zipcode",t)},expression:"form.zipcode"}}),r("span",{staticClass:"validity",attrs:{"aria-hidden":"true"}}),r("p",{staticClass:"exemple"})],1),r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Ville","label-for":"field-town"}},[r("b-form-input",{attrs:{id:"field-town","aria-invalid":"true",placeholder:"Paris",required:""},model:{value:e.form.town,callback:function(t){e.$set(e.form,"town",t)},expression:"form.town"}}),r("span",{staticClass:"validity",attrs:{"aria-hidden":"true"}}),r("p",{staticClass:"exemple"})],1)],1),r("p",{staticClass:"text-right"},[r("b-button",{attrs:{type:"button",size:"sm",variant:"info"},on:{click:e.saveProfile}},[e._v(e._s(null!==e.profile?"Modifier le profil":"Enregistrer le profil"))]),null!==e.profile?r("b-button",{staticClass:"ml-2",attrs:{type:"button",size:"sm",variant:"danger"},on:{click:e.deleteProfile}},[e._v("Supprimer le profil")]):e._e()],1),r("b-form-group",{attrs:{id:"motif",label:"Choisissez le ou les motif(s) de sortie"}},[r("b-form-checkbox-group",{attrs:{id:"checkbox-group-motif",name:"field-reason",stacked:""},model:{value:e.certificate.motif,callback:function(t){e.$set(e.certificate,"motif",t)},expression:"certificate.motif"}},[r("b-form-checkbox",{attrs:{value:"travail"}},[e._v(" Déplacements entre le domicile et le lieu d’exercice de l’activité professionnelle, lorsqu'ils sont indispensables à l'exercice d’activités ne pouvant être organisées sous forme de télétravail ou déplacements professionnels ne pouvant être différés. ")]),r("b-form-checkbox",{attrs:{value:"courses"}},[e._v(" Déplacements pour effectuer des achats de fournitures nécessaires à l’activité professionnelle et des achats de première nécessité dans des établissements dont les activités demeurent autorisées ("),r("a",{staticClass:"stores-link",attrs:{href:"https://www.service-public.fr/particuliers/actualites/A13921",title:"Liste des commerces et établissements qui restent ouverts - nouvelle page",target:"_blank"}},[e._v("liste des commerces et établissements qui restent ouverts")]),e._v("). ")]),r("b-form-checkbox",{attrs:{value:"sante"}},[e._v(" Consultations et soins ne pouvant être assurés à distance et ne pouvant être différés ; consultations et soins des patients atteints d'une affection de longue durée. ")]),r("b-form-checkbox",{attrs:{value:"famille"}},[e._v(" Déplacements pour motif familial impérieux, pour l’assistance aux personnes vulnérables ou la garde d’enfants. ")]),r("b-form-checkbox",{attrs:{value:"sport"}},[e._v(" Déplacements brefs, dans la limite d'une heure quotidienne et dans un rayon maximal d'un kilomètre autour du domicile, liés soit à l'activité physique individuelle des personnes, à l'exclusion de toute pratique sportive collective et de toute proximité avec d'autres personnes, soit à la promenade avec les seules personnes regroupées dans un même domicile, soit aux besoins des animaux de compagnie. ")]),r("b-form-checkbox",{attrs:{value:"judiciaire"}},[e._v("Convocation judiciaire ou administrative.")]),r("b-form-checkbox",{attrs:{value:"missions"}},[e._v(" Participation à des missions d’intérêt général sur demande de l’autorité administrative. ")])],1)],1),r("div",{staticClass:"form-row"},[r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Date de sortie"}},[r("b-form-input",{attrs:{type:"date",id:"field-datesortie",name:"datesortie",autocomplete:"off",placeholder:"JJ/MM/YYYY","aria-invalid":"true",required:""},model:{value:e.certificate.datesortie,callback:function(t){e.$set(e.certificate,"datesortie",t)},expression:"certificate.datesortie"}})],1),r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Heure de sortie"}},[r("b-form-input",{attrs:{type:"time",id:"field-heuresortie",name:"heure",autocomplete:"off","aria-invalid":"true",required:""},model:{value:e.certificate.heuresortie,callback:function(t){e.$set(e.certificate,"heuresortie",t)},expression:"certificate.heuresortie"}})],1)],1),r("p",{staticClass:"text-center my-3"},[r("b-button",{attrs:{type:"button",size:"lg",variant:"primary"},on:{click:e.getCertificate}},[e._v("Générer mon attestation")])],1)],1)},p=[],m=(r("99af"),r("4de4"),r("4160"),r("a15b"),r("ac1f"),r("3ca3"),r("4d90"),r("5319"),r("159b"),r("ddb0"),r("2b3d"),r("caad"),r("2532"),r("96cf"),r("1da1")),v=r("e198"),b=r("d055"),h=r.n(b),g=r("df7c"),x=r.n(g);function y(e,t,r,a,i){var n=i,o=e.widthOfTextAtSize(t,i);while(o>r&&n>a)o=e.widthOfTextAtSize(t,--n);return o>r?null:n}function C(e){return w.apply(this,arguments)}function w(){return w=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r={errorCorrectionLevel:"M",type:"image/png",quality:.92,margin:1},e.next=4,h.a.toDataURL(t,r);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e["catch"](0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),w.apply(this,arguments)}function _(e,t){return k.apply(this,arguments)}function k(){return k=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var a,i,n,o,s,l,c,u,f,d,p,m,b,h,g,w,_,k,P,S,j,O,D,q;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=(new Date).toLocaleDateString("fr-FR"),i=(new Date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}).replace(":","h"),n=t.lastname,o=t.firstname,s=t.birthday,l=t.lieunaissance,c=t.address,u=t.zipcode,f=t.town,d=t.datesortie,p=t.heuresortie,m=String(p).substring(0,2),b=String(p).substring(3,5),h=["Cree le: ".concat(a," a ").concat(i),"Nom: ".concat(n),"Prenom: ".concat(o),"Naissance: ".concat(s," a ").concat(l),"Adresse: ".concat(c," ").concat(u," ").concat(f),"Sortie: ".concat(d," a ").concat(m,"h").concat(b),"Motifs: ".concat(r)].join("; "),e.next=8,fetch(x.a).then((function(e){return e.arrayBuffer()}));case 8:return g=e.sent,e.next=11,v["PDFDocument"].load(g);case 11:return w=e.sent,_=w.getPages()[0],e.next=15,w.embedFont(v["StandardFonts"].Helvetica);case 15:return k=e.sent,P=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:11;_.drawText(e,{x:t,y:r,size:a,font:k})},P("".concat(o," ").concat(n),123,686),P(s,123,661),P(l,92,638),P("".concat(c," ").concat(u," ").concat(f),134,613),r.includes("travail")&&P("x",76,527,19),r.includes("courses")&&P("x",76,478,19),r.includes("sante")&&P("x",76,436,19),r.includes("famille")&&P("x",76,400,19),r.includes("sport")&&P("x",76,345,19),r.includes("judiciaire")&&P("x",76,298,19),r.includes("missions")&&P("x",76,260,19),S=y(k,t.town,83,7,11),S||(alert('Le nom de la ville risque de ne pas être affiché correctement en raison de sa longueur. Essayez d\'utiliser des abréviations ("Saint" en "St." par exemple) quand cela est possible.'),S=7),P(t.town,111,226,S),""!==r&&(P("".concat(t.datesortie),92,200),P(m,200,201),P(b,220,201)),P("Date de création:",464,150,7),P("".concat(a," à ").concat(i),455,144,7),e.next=36,C(h);case 36:return j=e.sent,e.next=39,w.embedPng(j);case 39:return O=e.sent,_.drawImage(O,{x:_.getWidth()-170,y:155,width:100,height:100}),w.addPage(),D=w.getPages()[1],D.drawImage(O,{x:50,y:D.getHeight()-350,width:300,height:300}),e.next=46,w.save();case 46:return q=e.sent,e.abrupt("return",new Blob([q],{type:"application/pdf"}));case 48:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}var P=_;function S(e){return String(e).padStart(2,"0")}var j={name:"FormProfile",data:function(){return{form:{firstname:"",lastname:"",birthday:"",birthplace:"",address:"",zipcode:"",town:""},certificate:{motif:[],datesortie:"",heuresortie:""},profile:null,profiles:[],profileOptions:[]}},beforeMount:function(){this.updateProfiles()},created:function(){var e=new Date,t=e.getFullYear(),r=S(e.getMonth()+1),a=S(e.getDate()),i=S(e.getHours()),n=S(e.getMinutes());this.certificate.datesortie="".concat(t,"-").concat(r,"-").concat(a),this.certificate.heuresortie="".concat(i,":").concat(n)},methods:{clear:function(){for(var e in this.form)this.form[e]=""},updateProfiles:function(){var e=this;this.profiles=localStorage.getItem("profils")?JSON.parse(localStorage.getItem("profils")):[],this.profileOptions=[{value:null,text:"Charger un profil"}],this.profiles.forEach((function(t,r){e.profileOptions.push({value:r,text:t.firstname})}))},saveProfile:function(){var e=this.profiles;null===this.profile?(e.push(this.form),this.profile++):(e[this.profile]=this.form,alert("Modifications enregistrées.")),localStorage.setItem("profils",JSON.stringify(e)),this.updateProfiles()},loadProfile:function(e){if(this.profile=e,null!==this.profile)for(var t in this.form)this.form[t]=this.profiles[this.profile][t];else this.clear()},deleteProfile:function(){var e=this;if(null!==this.profile){var t=this.profiles.filter((function(t,r){return e.profile!=r}));localStorage.setItem("profils",JSON.stringify(t)),this.updateProfiles(),this.profile=null,this.clear()}},getCertificate:function(){var e={lastname:this.form.lastname,firstname:this.form.firstname,birthday:this.form.birthday,lieunaissance:this.form.birthplace,address:this.form.address,zipcode:this.form.zipcode,town:this.form.town,datesortie:new Date(this.certificate.datesortie).toLocaleDateString("fr-FR"),heuresortie:this.certificate.heuresortie};P(e,this.certificate.motif.join("-")).then((function(e){var t=(new Date).toLocaleDateString("fr-CA"),r=(new Date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}).replace(":","-"),a="attestation-".concat(t,"_").concat(r,".pdf"),i=document.createElement("a");i.style.display="none",document.body.appendChild(i);var n=URL.createObjectURL(e);i.setAttribute("href",n),i.setAttribute("download",a),i.dispatchEvent(new MouseEvent("click"))}))}}},O=j,D=(r("1f49"),Object(o["a"])(O,d,p,!1,null,null,null)),q=D.exports;a["a"].use(f["a"]);var z=[{path:"/",name:"FormProfile",component:q},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}},{path:"/confidentialite",name:"Confidentialite",component:function(){return r.e("chunk-2d0c8225").then(r.bind(null,"541a"))}}],L=new f["a"]({routes:z}),M=L,$=r("f9bc"),A=r("1073"),E=r("b1fc"),F=r("7049"),R=r("3d31");r("b383");a["a"].config.productionTip=!1,a["a"].use($["a"]),a["a"].use(A["a"]),a["a"].use(E["a"]),a["a"].use(F["a"]),a["a"].use(R["a"]),new a["a"]({router:M,render:function(e){return e(c)}}).$mount("#app")},b383:function(e,t,r){},df7c:function(e,t,r){e.exports=r.p+"343ac8bb3542a6578f2a4cbaf0f99679.pdf"}});
//# sourceMappingURL=app.f1459e63.js.map